{
  "description": "Self-learning hooks with context tracking for {{agent_name}}",
  "hooks": {
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Analyze this session for {{agent_name}}. Check: 1) What patterns emerged? 2) What improvements could be made? 3) What errors occurred? Return JSON: {\"learned\": bool, \"patterns\": [{\"type\": \"workflow|error|improvement\", \"description\": \"...\", \"confidence\": 0.0-1.0}]}",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "python \"${COMPONENT_ROOT}/scripts/context_tracker.py\" extract",
            "timeout": 15
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "python \"${COMPONENT_ROOT}/scripts/context_tracker.py\" track \"$TOOL_NAME\" \"$TOOL_RESULT\" \"$TOOL_SUCCESS\" \"Context: $TOOL_INPUT\"",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "python \"${COMPONENT_ROOT}/scripts/pattern_extractor.py\" \"{{agent_name}}\"",
            "timeout": 15
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "python \"${COMPONENT_ROOT}/scripts/context_tracker.py\" clear",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "python \"${COMPONENT_ROOT}/scripts/apply_learned.py\" check",
            "timeout": 10
          }
        ]
      }
    ]
  },
  "context_tracking": {
    "enabled": true,
    "description": "Tracks tool calls and outcomes to learn only from successful approaches",
    "success_threshold": 0.7,
    "min_successes_to_learn": 2,
    "track_user_confirmations": true
  }
}
